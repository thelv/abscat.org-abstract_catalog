lib={pushInChild:function(t,e,o,n,i){var a=t[e]=t[e]||o;return i?a[i]=n:n&&a.push(n),a},selectFill:function(t,e){var o="";for(var n in e)o+="<option value="+e[n].value+">"+e[n].text+"</option>";t.html(o)},arrayValues:function(t){var e=[];for(var o in t)e.push(t[o]);return e},escapeHtml:function(t,e){return e?t.replace(/\&amp\;/g,"&").replace(/\&lt\;/g,"<").replace(/\&gt\;/g,">").replace(/\&quot\;/g,'"').replace(/\&\#039\;/g,"'"):t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},paramCookie:function(t,e){if(void 0===e)return $.cookie("param_"+t);$.cookie("param_"+t,e,{expires:1e3})},cookie:function(t,e){if(void 0===e)return JSON.parse($.cookie("param_"+t));$.cookie("param_"+t,JSON.stringify(e),{expires:1e3})},wordEnding:function(t,e){var o=t%10;return 1==parseInt(t/10)?"îâ":1==o?1==e?"à":"":0!=o&&o<5?1==e?"îâ":"à":"îâ"},seconds:function(){return parseInt((new Date).getTime()/1e3)},objectLength:function(t){var e=0;for(var o in t)e++;return e},objectEmpty:function(t){for(var e in t)return!1;return!0},escapeForJs:function(t){return t.replace(/['"\r\n]/g,"")}},Data=function(t,e){for(var o in e.connections)e.connections[o].id=o;window.data=this,this.objects=e.objects,this.connections=e.connections,this.connections_=connections_={fromObject:{},fromConnection:{}},this.ext=e,optimize=function(t){console.log("optim start");var e=connections_.fromObject,o=connections_.fromConnection;for(var n in t.objects)lib.pushInChild(lib.pushInChild(connections_.fromObject,0,{}),t.objects[n].type,[],{id:0,to:n});for(var n in t.connections){var i=t.connections[n];i.fromObject?(lib.pushInChild(lib.pushInChild(e,i.fromObject,{}),i.text,[],{id:n,to:i.to}),lib.pushInChild(lib.pushInChild(e,i.to,{}),i.oppositeText,[],{id:n,to:i.fromObject})):lib.pushInChild(lib.pushInChild(o,i.fromConnection,{}),i.text,[],{id:n,to:i.to})}console.log("optim end")};optimize(e),this.objectCreate=function(o,n){var i=arrayAvailableIndex(e.objects);return e.objects[i]={id:i,text:o.text.trim()||"_",type:o.type,color:o.color},n||save.save(t,this),i},this.objectEdit=function(e,o){var n=this.objects[e];n.text=o.text,n.type=o.type,n.color=o.color,save.save(t,this)},this.objectRemove=function(o){for(var n in delete this.objects[o],e.connections)e.connections[n].to!=o&&e.connections[n].fromObject!=o||delete e.connections[n];save.save(t,this)},this.connectionCreate=function(o){var n=arrayAvailableIndex(e.connections);return e.connections[n]={text:o.text,oppositeText:o.oppositeText,fromObject:o.fromObject,fromConnection:o.fromConnection,to:o.to},save.save(t,this),n},this.connectionEdit=function(e,o){var n=this.connections[e];n.text=o.text,n.oppositeText=o.oppositeText,save.save(t,this)},this.connectionRemove=function(o){for(var n in delete e.connections[o],e.connections)e.connections[n].fromConnection&&e.connections[n].from==o&&delete e.connections[n];save.save(t,this)}};var Branch=function(t,e,o,n,i,a){if(this.parent=a,this.childs=[],this.childsLoaded=!1,this.childsShowed=!1,o){this.objectId=o;var s=t.objects[this.objectId];this.node=$('\t\t\t<div class="tree branch">\t\t\t\t<div>\t\t\t\t\t<div class=object>\t\t\t\t\t\t<a class="object_select"><input type="checkbox"></a><span class="object_">'+("song"==s.type?"<a class=object_play></a>":"")+'<a class=object_text onclick="return false;"></a>\x3c!-- <a class=object_menu_icon></a> --\x3e</span>\t\t\t\t\t</div>\t\t\t\t</div>\t\t\t\t<div class="childs"></div>\t\t\t</div>\t\t')}else{var c=t.connections[n];if(i){var l=c.text;s=t.objects[c.to];this.objectId=c.to}else{l=c.oppositeText,s=t.objects[c.from];if(c.fromConnection)return void(this.node=$('<div style="display:none"></div>'));this.objectId=c.fromObject}s=t.objects[this.objectId];this.node=$('\t\t\t<div class="branch">\t\t\t\t<div>\t\t\t\t\t<span class="connection"><span class="connection_text" title="expand"></span>:</span><div class=object><a class="object_select"><input type="checkbox"></a><span class="object_">'+("song"==s.type?"<a class=object_play></a>":"")+'<a class=object_text onclick="return false;"></a><a class=object_menu_icon></a></span>\t\t\t\t\t</div>\t\t\t\t</div>\t\t\t\t<div class="childs"></div>\t\t\t</div>\t\t'),this.nodeConnectionText=this.node.find(".connection_text"),this.nodeConnectionText.text(l),this.node.find(".object_menu_icon").function}this.nodeChilds=this.node.find("> .childs"),this.nodeObject=this.node.find(".object"),this.nodeObjectText=this.nodeObject.find(".object_text").text(s.text).attr("title",s.type).css("color",s.color),this.childsShow=function(o,n){if(this.childsLoaded)this.childsShowed?this.nodeChilds.hide():this.nodeChilds.show(),this.childsShowed=!this.childsShowed;else{var i=[];for(var a in t.connections){(s=t.connections[a]).fromObject===o&&s.to!=n?i.push({connection:s,connectionId:a,direction:!0}):s.to==o&&s.fromObject!=n&&i.push({connection:s,connectionId:a,direction:!1})}for(var a in i=i.sort(function(e,o){var n=(e.direction?e.connection.text:e.connection.oppositeText).toLowerCase(),i=(o.direction?o.connection.text:o.connection.oppositeText).toLowerCase();return n==i?(e.direction?t.objects[e.connection.to]:t.objects[e.connection.fromObject]).text.toLowerCase()>(o.direction?t.objects[o.connection.to]:t.objects[o.connection.fromObject]).text.toLowerCase()?1:-1:n>i?1:-1})){var s;if((s=i[a]).direction)var c=new Branch(t,e,!1,+s.connectionId,!0,this);else c=new Branch(t,e,!1,+s.connectionId,!1,this);this.childs.push(c),this.nodeChilds.append(c.node)}0==i.length&&n&&(toast.show("no more connections except parent"),this.nodeConnectionText.addClass("connection_text_no_childs"),this.nodeConnectionText.attr("title","")),this.childsLoaded=this.childsShowed=!0}},o&&this.childsShow(o),this.showNewChild=function(o){var n=new Branch(t,e,!1,o,!0,this);this.childs.push(n),this.nodeChilds.append(n.node)}},table=function(t,e,o,n){console.log("start");var i=function(t,o){var n=$("<table class=table cellpadding=0 cellspacing=0><tr></tr></table>"),i=n.find("tr");for(var a in i.append("\t\t\t\t<td>\t\t\t\t\t<div class=table_type_head>\t\t\t\t\t\tTypes:\t\t\t\t\t</div>\t\t\t\t\t<div class=table_type_objects>\t\t\t\t\t\tObjects:\t\t\t\t\t</div>\t\t\t\t</td>\t\t\t"),t){var s=t[a],c=$('\t\t\t\t<td>\t\t\t\t\t<div class=table_type_head>\t\t\t\t\t\t<a></a>\t\t\t\t\t\t<div class=_menu_icon></div>\t\t\t\t\t</div>\t\t\t\t\t<div class="table_type_objects '+("song"==s.type?"sssong":"")+'">\t\t\t\t\t</div>\t\t\t\t</td>\t\t\t');c.find(".table_type_head a").text(s.type||"_");var l=c.find(".table_type_objects"),d=function(t){var o=$("<div></div>");for(var n in t){var i=t[n],a=$('\t\t\t\t\t\t<div class=table_type_object>\t\t\t\t\t\t\t<div class=object>\t\t\t\t\t\t\t\t<a class="object_select"><input type="checkbox"></a><span class="object_">'+("song"==i.type?"<a class=object_play></a>":"")+'<a class=object_text onclick="return false;"></a><a class=object_menu_icon></a></span>\t\t\t\t\t\t\t</div>\t\t\t\t\t\t</div>\t\t\t\t\t');a.find(".object_text").text(i.text).css("color",i.color).attr("title",i.type+"\n"+i.text).attr("href",url.gen({page:"catObj",catId:e,objId:i.id})),o.append(a)}return o};s.objectsFiltered&&(s.objectsFiltered=s.objectsFiltered.slice(0,50)),s.objects&&(s.objects=s.objects.slice(0,50)),s.objectsFiltered.length&&l.append(d(s.objectsFiltered).addClass("table_type_objects_filtered")),s.objects.length&&l.append(d(s.objects)),i.append(c)}return n},a=[],s=o;for(var c in o||n||(o="song"),t.objects){var l=t.objects[c];o&&-1===l.type.toLowerCase().indexOf(o)||n&&-1===l.text.toLowerCase().indexOf(n)?a[l.type]?a[l.type].objects.push(l):a[l.type]={type:l.type,objects:[l],objectsFiltered:[]}:a[l.type]?a[l.type].objectsFiltered.push(l):a[l.type]={type:l.type,objects:[],objectsFiltered:[l]}}var d=a.genre?[a.genre]:[];delete a.genre;var r=[],p=[];for(var c in a)a[c].objectsFiltered.length?p.push(a[c]):r.push(a[c]);a=(a=r).sort(function(t,e){return(t.type.toLowerCase()>e.type.toLowerCase()||!t.type)&&e.type?1:-1}),a=d.concat(a),0==(p=p.sort(function(t,e){return(t.type.toLowerCase()>e.type.toLowerCase()||!t.type)&&e.type?1:-1})).length&&(s||n)&&toast.show("nothing's found");var h=[a,p];for(var c in h){r=h[c];for(var c in r){var u=r[c].objects,m=r[c].objectsFiltered;u=u.sort(function(t,e){return t.text.toLowerCase()>e.text.toLowerCase()?1:-1}),m=m.sort(function(t,e){return t.text.toLowerCase()>e.text.toLowerCase()?1:-1})}}if(console.log("endsort"),p.length&&a.length){var _=$('<table cellspacing=0 cellpadding=0 class=table_cont><tr><td><div class="table_filtered_cont"></div></td><td class=table_not_filtered_cont></td></tr></table>');return _.find(".table_filtered_cont").append(i(p)),p.length<=2&&_.find(".table_filtered_cont").addClass("_fix_on_scroll"),_.find(".table_not_filtered_cont").append(i(a)),console.log("end"),_}return console.log("end"),i(p.length?p:a)},menu={node:null,elementNode:null,init:function(){this.node=$("#menu")},openOrClose:function(t,e){for(var o in this.node.html(""),e)!function(t){e[t].separ&&menu.node.append($("<div class=_separ></div>"))}(o);var n=this.elementNode&&this.elementNode.get(0)==t.get(0);if(this.elementNode&&this.close(),!n){$("#tree").addClass("menu_opened"),this.elementNode=t;var i=menu.node.height(),a=menu.node.width(),s=t.offset(),c=s.top-$(window).scrollTop(),l=(t.height(),t.width()),d=$(window).height()-c-22-i,r=c-i;menu.node.css("left",Math.max($("body").scrollLeft(),s.left+l-a+20)+"px"),d<0&&r>0?menu.node.css("top",s.top-i-3+"px"):menu.node.css("top",s.top+24+"px"),menu.node.show(),setTimeout(function(){menu.closeBind()},0)}},close:function(){$("#tree").removeClass("menu_opened"),this.elementId=0,this.parentId=0,this.elementNode=null,this.node.hide(),this.closeUnbind()},closeForBind:function(){menu.close()},closeBind:function(){},closeUnbind:function(){}},Object_={createNode:function(t,e){var o=$('\t\t\t<div class=object>\t\t\t\t<a class="object_select"><input type="checkbox"></a><span class="object_">'+("song"==t.type?"<a class=object_play></a>":"")+'<a class=object_text onclick="return false;"></a><a class=object_menu_icon></a></span>\t\t\t</div>\t\t');return o.find(".object_text").text(t.text).css("color",t.color).attr("title",t.type+"\n"+t.text).attr("href",url.gen({page:"catObj",catId:e,objId:t.id})),o},actions:{create:function(t,e,o,n){windows.objectNew.open(t,o,function(t){var e=o.objectCreate(t);n(e)})},edit:function(t,e,o,n){windows.objectEdit.open(t,o,function(e){o.objectEdit(t.id,e),n()})},remove:function(t,e,o,n){windows.objectRemove.open(t,function(e){e&&o.objectRemove(t.id),n(e)})},connectWithNewObject:function(t,e,o,n){windows.objectConnectWithNewObject.open(t,o,function(e){var i=o.objectCreate({id:i,text:e.objectText.trim()||"_",type:e.objectType,color:e.objectColor},!0),a=o.connectionCreate({text:e.connectionText,oppositeText:e.connectionOppositeText,fromObject:t.id,to:i});n(a)})},connectWithObjectFromBuffer:function(t,e,o,n){windows.objectConnectWithObjectFromBuffer.open(t,o,function(e){var i=e.objectId,a=o.connectionCreate({text:e.connectionText,oppositeText:e.connectionOppositeText,fromObject:t.id,to:i});n(a)})},putInBuffer:function(t){buffer.put(t)},open:function(t,e){pages.catObj.go(e,t.id)},openInNewTab:function(t,e){window.open(url.gen({page:"catObj",catId:e,objId:t.id}))}}};Window=function(t){this.node=$("#"+t),this.show=function(){$("#window_container").css("display","flex").show(),this.node.show()},this.close=function(){this.node.hide(),$("#window_container").hide()},this.extend=function(t){return t.call(this),this}},windows={import:new Window("window_import").extend(function(){this.open=function(t,e){this.show()}}),alert:new Window("window_alert").extend(function(){this.open=function(t,e){this.node.find("._form ._head").text(t.text),"ok"==t.buttons?this.node.find("._button_cancel").hide():this.node.find("._button_cancel").show(),this.show(),this.ok=function(){e&&e(!0),this.close()}}}),objectNew:new Window("window_object_new").extend(function(){var t=!1,e=this.node.find("[name=object_type]"),o=this.node.find("[name=object_color]"),n=function(){o.val(o.val().trim()||dataGetTypeColor(t,e.val().trim()))};$(function(){e.blur(n)}),this.open=function(e,o,n){t=o,this.node.find("[name=object_text]").val(""),this.node.find("[name=object_type]").val(e&&e.type||""),this.node.find("[name=object_color]").val(e&&e.color||""),this.show(),this.ok=function(){n({text:$("#window_object_new textarea[name=object_text]").val(),type:$("#window_object_new input[name=object_type]").val(),color:$("#window_object_new input[name=object_color]").val()}),this.close()}}}),objectConnectWithNewObject:new Window("window_object_connect_with_new_object").extend(function(){var t=!1,e=this.node.find("[name=object_type]"),o=this.node.find("[name=object_color]"),n=this.node.find("[name=connection_text]"),i=this.node.find("[name=connection_opposite_text]");$(function(){i.add(n).focus(function(){$(this).attr("autofilled")&&($(this).select(),$(this).attr("autofilled",""))}),e.blur(function(){o.val(o.val().trim()||dataGetTypeColor(t,e.val().trim())),n.attr("autofilled")&&n.val(e.val())})}),this.open=function(e,o,n){t=o,this.node.find("input, textarea").val("").attr("autofilled","1"),e&&i.val(e.type),i.attr("autofilled","yes"),this.show(),this.ok=function(){n({objectText:$("#window_object_connect_with_new_object textarea[name=object_text]").val(),objectType:$("#window_object_connect_with_new_object input[name=object_type]").val(),objectColor:$("#window_object_connect_with_new_object input[name=object_color]").val(),connectionText:$("#window_object_connect_with_new_object input[name=connection_text]").val(),connectionOppositeText:$("#window_object_connect_with_new_object input[name=connection_opposite_text]").val()}),this.close()}}}),objectConnectWithObjectFromBuffer:new Window("window_object_connect_with_object_from_buffer").extend(function(){var t=this.node.find("[name=connection_text]"),e=this.node.find("[name=connection_opposite_text]");$(function(){e.add(t).focus(function(){$(this).attr("autofilled")&&($(this).select(),$(this).attr("autofilled",""))})}),this.open=function(o,n,i){if(buffer.element)if(n.objects[buffer.element.id]){this.node.find("input, textarea").val("").attr("autofilled","1"),o&&e.val(o.type);var a=n.objects[buffer.element.id];this.node.find("[name=object_id]").val(a.id),this.node.find("[name=object_text]").val(a.text),this.node.find("[name=object_type]").val(a.type),t.val(a.type),this.ok=function(){i({objectId:a.id,connectionText:$("#window_object_connect_with_object_from_buffer input[name=connection_text]").val(),connectionOppositeText:$("#window_object_connect_with_object_from_buffer input[name=connection_opposite_text]").val()}),this.close()},this.show()}else windows.alert.open({text:"The object from the buffer doesn't exist anymore!",buttons:"ok"});else windows.alert.open({text:"The buffer is empty!",buttons:"ok"})}}),objectEdit:new Window("window_object_edit").extend(function(){var t=!1,e=this.node.find("[name=object_type]"),o=this.node.find("[name=object_color]"),n=function(){o.val(o.val().trim()||dataGetTypeColor(t,e.val().trim()))};$(function(){e.blur(n)}),this.open=function(e,o,n){t=o,this.node.find("[name=object_text]").val(e.text),this.node.find("[name=object_type]").val(e.type),this.node.find("[name=object_color]").val(e.color),this.show(),this.ok=function(){n({text:$("#window_object_edit textarea[name=object_text]").val(),type:$("#window_object_edit input[name=object_type]").val(),color:$("#window_object_edit input[name=object_color]").val()}),this.close()}}}),objectRemove:new Window("window_object_remove").extend(function(){this.open=function(t,e){this.node.find("._form ._head").text('Remove the object "'+t.text+'"?'),this.show(),this.ok=function(){e(!0),this.close()}}}),connectionEdit:new Window("window_connection_edit").extend(function(){this.open=function(t,e){this.node.find("[name=text]").val(t.text),this.node.find("[name=opposite_text]").val(t.oppositeText),this.show(),this.ok=function(){e({text:this.node.find("[name=text]").val(),oppositeText:this.node.find("[name=opposite_text]").val()}),this.close()}}}),connectionRemove:new Window("window_connection_remove").extend(function(){this.open=function(t,e){this.node.find("._form ._head").text('Remove the connection "'+t.text+'"?'),this.show(),this.ok=function(){e(!0),this.close()}}}),typeEdit:new Window("window_type_edit").extend(function(){this.open=function(t,e,o){this.node.find("[name=text]").val(t),this.node.find("[name=color]").val(dataGetTypeColor(e,t)),console.log(e),this.show(),this.ok=function(){o({text:this.node.find("[name=text]").val(),color:this.node.find("[name=color]").val()}),this.close()}}})};var buffer={element:null,hided:!0,init:function(){this.node=$("#buffer"),buffer.putFromCookie(),$(window).focus(function(){buffer.putFromCookie()})},put:function(t,e){var o=this;t?(this.element=t,this.node.find("._id_value").text(t.id),this.node.find("._text_value").text(t.text),this.node.find("._type_value").text(t.type),e?this.node.show():this.node.css({display:"block"}).animate({"background-color":"rgba(200, 200, 200, 0.84)"},400,function(){o.node.animate({"background-color":"rgba(220, 220, 220, 0.94)"},300)}),this.hided=!1,$.cookie("buffer",JSON.stringify(t),{path:"/"})):this.clear()},putFromCookie:function(){try{var t=JSON.parse($.cookie("buffer"))}catch(e){t=!1}buffer.put(t,!0)},clear:function(){this.element=null,this.node.hide(),this.hided=!0,$.cookie("buffer","",{path:"/"})},get:function(){return this.element}},player={state:"closed",stateHidedAuto:!1,stateWasClosedByUserOnceAndNotOpened:!1,leaveTimeoutEndTime:0,q:!1,open:function(t){t=t.replace(/_/g," "),player.q=t,player.hide(!1),$("#player_head ._head_title").text(t),$("#player_bar span").text(t),vk.open(t,!0),youtube.open(t),this.leave(!1,1e4)},hide:function(t,e){("closed"!=player.state&&"hided"!=player.state||!t)&&(player.state=t?"hided":"showed",t?(e?($("#player_bar").addClass("_locked"),player.stateHidedAuto=!1):($("#player_bar").removeClass("_locked"),player.stateHidedAuto=!0),$("#players").addClass("_player_hided"),$("#player").hide(),$("#player_bar").show()):(player.leave(),$("#players").removeClass("_player_hided"),$("#player").show(),$("#player_bar").hide()))},stop:function(){player.state="closed",youtube.stop(),vk.stop()},stop:function(){youtube.stop(),vk.stop()},leave:function(t,e){if(e=e||5e3,t)player.leaveTimeout&&(player.leaveTimoutDisabled=!0);else{player.leaveTimoutDisabled=!1;var o=(new Date).getTime(),n=o+e;if(player.leaveTimeout){if(o+e<player.leaveTimeoutEndTime)return;clearTimeout(player.leaveTimeout)}player.leaveTimeoutEndTime=n,player.leaveTimeout=setTimeout(function(){"showed"==youtube.state||player.leaveTimoutDisabled||player.hide(!0)},e)}}};$(function(){});var vk={window:!1,windowWas:!1,windowUrlLast:!1,q:!1,qOpened:!1,open:function(t,e){if(t?($("#players").addClass("_vk_showed"),this.q=t):t=this.q,!e)if(!this.window||this.window.closed||this.q!=this.qOpened){var o=$("#player_head").offset().top,n=window.screen.availWidth-500,i=(o=$(window).height()-("hided"==youtube.state?141:"showed"==youtube.state?294:91)-340,JSON.stringify({width:500,height:340,top:o,left:n,url:"https://m.vk.com/audio?q="+encodeURIComponent(t)}));vk.window=window.open("/vk_redir.php#"+encodeURIComponent(i),"vk","width=500,height=340,top="+o+",left="+n),this.qOpened=this.q,this.windowWas=!0}else this.window.focus()},close:function(t){$("#players").removeClass("_vk_showed"),vk.stop(),$("#vk").hide()},stop:function(){if(!this.windowWas||this.window&&!this.window.closed){var t=window.screen.availHeight-330-57-20,e=window.screen.availWidth-500;this.window=window.open("https://abscat.org/vk_closed.php","vk","width=500,height=330,top="+t+",left="+e),this.window.close()}},windowOpen:function(){!this.window||this.window.closed?this.open(this.q):this.window.focus()}};$(function(){});var youtube={state:"hided",q:!1,hintTimeout:!1,hintTimeoutHover:!1,player:!1,open:function(t){var e=this;$("#youtube_").show(),$("#players").addClass("_youtube_showed"),$.get("https://www.googleapis.com/youtube/v3/search?type=video&part=snippet&key=AIzaSyD_vcwc1q5ozgU7THGtgRWX3B_GGnywijM",{q:t},function(t){if(t.items&&t.items[0]){var o=t.items[0].id.videoId,n=t.items[0].snippet.title;e.player&&e.player.destroy(),$("#youtube_ option").text(n),$("#youtube_ select").attr("title",n),$("#youtube_ ._hint").text(n),$("#youtube_ ._hint_video").text(n).removeClass("_hided"),e.hintTimeout&&clearTimeout(e.hintTimeout),e.hintTimeout=setTimeout(function(){$("#youtube_ ._hint_video").addClass("_hided")},6e3),$("#youtube_ ._hint").removeClass("_hided_first"),$("#youtube_").attr("state_play","loading"),youtubeApiPromise.then(function(){e.player=new YT.Player("youtube_iframe_cont",{width:"360px",height:"203px",videoId:o,playerVars:{autoplay:1},events:{onReady:function(){"stopped"==$("#youtube_").attr("state_play")&&e.player.stopVideo()},onStateChange:function(t){console.log(t.data),0==(t=t.data)||2==t?($("#player_bar span").text(player.q),$("#youtube_").attr("state_play","stopped")):1==t&&($("#player_bar span").text(n),$("#youtube_").attr("state_play","playing"))}}})})}})},stop:function(){$("#youtube_").attr("state_play","stopped");try{this.player.pauseVideo()}catch(t){}},close:function(t){$("#players").removeClass("_youtube_showed"),$("#youtube_ ._video iframe").removeAttr("src"),$("#youtube_").hide()},hide:function(t){},show:function(t){}},youtubeApiPromise=new Promise(function(t){window.onYouTubeIframeAPIReady=t});$(function(){});var pages={about:new function(){this.go=function(){url.set({page:"about"}),this.open()},this.open=function(){styling.clear(),state.page="about",$(".page").hide(),$("#page_about").show(),window.aa?aa():alert(1)}},cats:new function(){this.go=function(){url.set({page:"cats"}),this.open()},this.open=function(){styling.clear(),state.page="cats",$(".page").hide(),$("#page_cats .body_body").html(""),$("#page_cats .body_loading").show(),$("#page_cats").show(),$.get("/ajax.php?type=cats",null,function(t){for(var e in $("#page_cats .body_loading").hide(),t){t[e];var o=$("<div class=_cat><span></span></div>");$("#page_cats .body_body").append(o)}window.aa&&aa()},"json")}},cat:new function(){var t=!1,e={text:"",type:""},o=null,n=!1;fixOnScrollNodes=!1,$(function(){$("#page_catalog .object_filter form").submit(function(){return filter(),!1}).on("reset",function(){setTimeout(function(){filter()},0)})}),this.go=function(t){url.set({page:"cat",catId:t}),this.open(t)},this.open=function(t){fixOnScrollNodes=$("#page_catalog ._fix_on_scroll"),help.hide(),styling.set(),state.page="cat",n=t,$(".page").hide(),fixOnScroll(),$("#page_catalog .body_head").text(n==user.id?"My catalog":"Catalog "+ +n),$("#page_catalog").addClass("_object_filter_hided"),$("#page_catalog").show(),dataExt.get(n,function(t){o=t,help.show(o,n),$("#page_catalog").removeClass("_object_filter_hided"),filter(),help.show(o,n),window.aa?aa():alert(1)}),$("#page_catalog .body_menu ._backup").attr("href","/ajax.php?type=cat&cat_id="+n).attr("download","abscat.org - catalog #"+n+" - backup.txt")},filter=function(i){var a=$("#page_catalog .object_filter_type").val(),s=$("#page_catalog .object_filter_text").val();i||t!==n||e.type!=a||e.text!=s?($("#page_catalog .object_table").html(""),$("#page_catalog .body_loading").show(),setTimeout(()=>{$("#page_catalog .body_loading").hide(),$("#page_catalog .object_table").append(table(o,n,a,s)),t=n,e={type:a,text:s},fixOnScrollNodes=$("#page_catalog ._fix_on_scroll")})):($("#page_catalog").addClass("_object_filter_hided"),$("#page_catalog .body_loading").show(),setTimeout(()=>{$("#page_catalog").removeClass("_object_filter_hided"),$("#page_catalog .body_loading").hide()}))}},catObj:new function(){var t=!1,e=!1;$(function(){}),this.go=function(t,e){url.set({page:"catObj",catId:t,objId:e},{pageBack:state.page}),this.open(t,e)},this.open=function(o,n){styling.set(),history.state&&"catObj"==history.state.pageBack?$("#page_catalog_object").addClass("_back_history_showed"):$("#page_catalog_object").removeClass("_back_history_showed"),state.page="catObj",t=o,e=n,$(".page").hide(),$("#page_catalog_object .body_head").text((t==user.id?"My catalog":"Catalog "+ +t)+" - Object"),$("#page_catalog_object .body_body").html(""),$("#page_catalog_object .body_loading").show(),$("#page_catalog_object").show(),setTimeout(()=>{dataExt.get(t,function(o){data=o,$("#page_catalog_object .body_loading").hide(),$("#page_catalog_object .body_body").append(new Branch(data,t,e).node),window.aa?aa():alert(1)})})}},sql:new function(){var t=!1;$(function(){new SqlEditor($("#page_sql .sql_editor"))}),this.go=function(t){url.set({page:"sql",catId:t},{pageBack:state.page}),this.open(t),this.open(t)},this.open=function(e){fixOnScrollNodes=$("#page_sql ._fix_on_scroll"),styling.set(),state.page="sql",t=e,$(".page").hide(),$("#page_sql .body_head").text((t==user.id?"My catalog":"Catalog "+ +t)+" - SQL"),$("#page_sql .body_loading").show(),$("#page_sql").show(),setTimeout(()=>{dataExt.get(t,function(t){data=t,$("#page_sql .body_loading").hide()})})}}},fixOnScrollNodes=!1;$(window).scroll(function(t){"cat"!=state.page&&"sql"!=state.page||fixOnScroll()});var fixOnScroll=function(){fixOnScrollNodes.css("left",$("body").scrollLeft()+"px")};function arrayAvailableIndex(t){var e=0;for(var o in t)e=o;return++e}function dataGetTypeColor(t,e){for(var o in t.objects)if(t.objects[o].type==e)return t.objects[o].color}comments_={id:0,name:"Ð“Ð¾ÑÑ‚ÑŒ",lastName:"",image:"/img/noava.gif",sig:"sid=",chatId:0,chatIdPostTo:0,chatName:"",I:0,postSending:!1,months:["ÑÐ½Ð²","Ñ„ÐµÐ²","Ð¼Ð°Ñ€","Ð°Ð¿Ñ€","Ð¼Ð°Ñ","Ð¸ÑŽÐ½","Ð¸ÑŽÐ»","Ð°Ð²Ð³","ÑÐµÐ½","Ð¾ÐºÑ‚","Ð½Ð¾Ñ","Ð´ÐµÐº"],auth:function(t,e,o,n,i){comments_.id=t,comments_.name=e,comments_.lastName=o,comments_.image=n,comments_.sig=i,$("#commentsAdd img").attr("src",n),$("body").append('<style>#comments[chat="0"][chat_show_all_in_common="0"] .commentsComment[chat_id="'+parseInt(comments_.id)+'"]{display:block}/*#comments.chat[chat_show_all_in_common="0"] .commentsComment[chat_id="'+parseInt(comments_.id)+'"]{display:none}*/</style>')},post:function(){if(!this.postSending){this.postSending=!0,comments_.addSongShow(!1);var t=$("#commentsAdd textarea").val();comments_.chat.subscribe(comments_.chatId),$.ajax({url:"http://195.201.88.63:8000/",dataType:"text",data:{type:"post",auth:comments_.sig,comment:{user_id:comments_.id,user_name:comments_.name,user_last_name:comments_.last_name,user_image:comments_.image,text:t,chat_id:comments_.chatId||comments_.chatIdPostTo,chat_name:comments_.chatName}},success:function(t){comments_.chat.hidePostTo(),"OK"==t?$("#commentsAdd textarea").val(""):"ERROR_AUTH"==t?alert("ÐžÑˆÐ¸Ð±ÐºÐ° Ð°Ð²Ñ‚Ð¾Ñ€Ð¸Ð·Ð°Ñ†Ð¸Ð¸ Ð¿Ñ€Ð¸ Ð¿Ð¾Ð¿Ñ‹Ñ‚ÐºÐµ Ð·Ð°Ð¿Ð¾ÑÑ‚Ð¸Ñ‚ÑŒ ÐºÐ¾Ð¼Ð¼ÐµÐ½Ñ‚Ð°Ñ€Ð¸Ð¹."):"ERROR_BLACK_LIST"==t?alert("Ð’Ñ‹ Ð·Ð°Ð±Ð°Ð½ÐµÐ½Ñ‹ Ð² Ñ€Ð°Ð·Ð´ÐµÐ»Ðµ ÐºÐ¾Ð¼Ð¼ÐµÐ½Ñ‚Ð°Ñ€Ð¸ÐµÐ². ÐœÑƒÐ·Ñ‹ÐºÐ° Ð¿Ñ€Ð¸ ÑÑ‚Ð¾Ð¼ Ð¿Ð¾-Ð¿Ñ€ÐµÐ¶ÐµÐ½ÐµÐ¼Ñƒ ÑÐºÐ°Ñ‡Ð¸Ð²Ð°ÐµÑ‚ÑÑ."):"ERROR_COUNTRY"==t&&alert('ÐÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ð¾ Ð°Ð²Ñ‚Ð¾Ñ€Ð¸Ð·Ð¾Ð²Ð°Ñ‚ÑŒÑÑ, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¾ÑÑ‚Ð°Ð²Ð»ÑÑ‚ÑŒ ÐºÐ¾Ð¼Ð¼ÐµÐ½Ñ‚Ð°Ñ€Ð¸Ð¸. Ð”Ð»Ñ ÑÑ‚Ð¾Ð³Ð¾ Ð½ÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ð¾ Ð½Ð°Ð¶Ð°Ñ‚ÑŒ "Ñ€Ð°Ð·Ñ€ÐµÑˆÐ¸Ñ‚ÑŒ Ð´Ð¾ÑÑ‚ÑƒÐ¿ Ðº ÑÐ²Ð¾Ð¸Ð¼ Ð°ÑƒÐ´Ð¸Ð¾Ð·Ð°Ð¿Ð¸ÑÑÐ¼" ÑÐ»ÐµÐ²Ð°.'),comments_.postSending=!1},error:function(){alert("ÐŸÑ€Ð¾Ð¸Ð·Ð¾ÑˆÐ»Ð° Ð¾ÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÐºÐµ ÐºÐ¾Ð¼Ð¼ÐµÐ½Ñ‚Ð°Ñ€Ð¸Ñ. ÐŸÐ¾Ð¿Ñ€Ð¾Ð±ÑƒÐ¹Ñ‚Ðµ ÐµÑ‰Ðµ Ñ€Ð°Ð·."),comments_.postSending=!1}})}},get:function(){$.ajax({url:"http://195.201.88.63:8000/",dataType:"json",data:{type:"get",comment_id:comments_.I},success:function(t){var e="";for(var o in t){var n=t[o],i=n.user_name||"",a=n.user_last_name||"",s=n.user_image||"",c=n.text||"",l=new Date(1e3*n.time),d=n.user_id,r=n.id,p=parseInt(n.chat_id)||0,h=n.chat_name||"";l=l.getDate()+" "+comments_.months[l.getMonth()]+" "+l.getFullYear()+" "+l.toTimeString().substr(0,5),c=lib.escapeHtml(c).replace(/\r*\n/g,"<br>").replace(/\[audio=([\d_\-]+)\](.*?)\[\/audio\]/g,function(t,e,o){return e=e.replace(/[\r\n'"<>]/g,"_"),m2_=lib.escapeHtml(lib.escapeHtml(o,!0)),"</span><a class=commentsTextSong oncontextmenu=\"vk.stop();vk.open('"+(o=lib.escapeHtml(o,!0).replace(/[\r\n'"<>\\]/g,"_"))+"');event.preventDefault();\" onclick=\"comments_.audio.play('"+e+"', '"+o+"')\">"+m2_+"</a><span>"}).replace(/(<br>)*\[quote=\&quot\;(.+?)\&quot\;\](.*?)\[\/quote\](<br>)*/g,function(t,e,o,n){return"</span><div class=commentsQuote><b>â†¦ "+lib.escapeHtml(o)+"</b><span>"+n+"</span></div><span>"}),e="\t\t\t\t\t\t<div class=commentsComment id=comment"+parseInt(r)+" chat_id="+parseInt(p)+'>\t\t\t\t\t\t\t<div class=commentsAva>\t\t\t\t\t\t\t\t<a target=_blank href="http://vk.com/id'+parseInt(d)+'"><img src="'+lib.escapeHtml(s)+'" width="50" height="50"></a>\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t<div class=commentsRight>\t\t\t\t\t\t\t\t<div class=commentsName><a target=_blank href="http://vk.com/id'+parseInt(d)+'">'+lib.escapeHtml(i)+" "+lib.escapeHtml(a)+"</a></div>\t\t\t\t\t\t\t\t<div class=commentsText><span>"+c+"</span></div>"+(p?'<a class=commentsCommentChat onclick="comments_.chat.show('+parseInt(p)+", '"+lib.escapeForJs(lib.escapeHtml(h))+"')\"><div>ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ ÑÐ¾ ÑÑ‚ÐµÐ½Ñ‹ "+lib.escapeHtml(h)+"</div></a>":"")+"<div class=commentsDate>"+lib.escapeHtml(l)+' <span class=commentsAction>- <a class=commentsReply onclick="comments_.reply(this); '+(p?"comments_.chat.showPostTo("+parseInt(p)+", '"+lib.escapeForJs(lib.escapeHtml(h))+"');":"")+'">Ð¾Ñ‚Ð²ÐµÑ‚Ð¸Ñ‚ÑŒ</a></span> \x3c!-- <span class=commentsAction>- <a class=commentsChat onclick="comments_.chat.show('+parseInt(d)+", '"+lib.escapeForJs(lib.escapeHtml(i)+" "+lib.escapeHtml(a))+"')\">ÑÑ‚ÐµÐ½Ð°</a></span>--\x3e</div>\t\t\t\t\t\t\t</div>\t\t\t\t\t\t</div><div></div>\t\t\t\t\t"+e,comments_.I=n.id}$("#commentsList").prepend($(e)),setTimeout(function(){comments_.get()},2e3)},error:function(){setTimeout(function(){comments_.get()},7e3)}})},reply:function(t){var e=$(t).closest(".commentsComment"),o=e.find(".commentsName").text(),n=$("<div>"+e.find(".commentsText").html()+"</div>");n.find(".commentsQuote").remove(),n=n.text(),$("#comments").scrollTop(0);var i=$(".commentsTextarea textarea"),a=i.val();"\n"!=a.substr(-1)&&(a+="\n"),i.val(a+'[quote="'+o+'"] '+n+" [/quote]")},replySimple:function(t){var e=$(t).closest(".commentsComment"),o=e.find(".commentsName").text(),n=$("<div>"+e.find(".commentsText").html()+"</div>");n.find(".commentsQuote").remove(),n=n.text(),$("#comments").scrollTop(0);var i=$(".commentsTextarea textarea"),a=i.val();i.val('[to="'+o+'"], '+a)},audio:{addShow:function(t){t?$("body").addClass("comments_audio_add"):$("body").removeClass("comments_audio_add")},add:function(t){comments_.addSong(t.owner_id+"_"+t.aid,t.artist+" - "+t.title)},play:function(t,e){player.open(e)}},addSong:function(t,e){var o=$(".commentsTextarea textarea"),n=o.val();n&&"\n"!=n.substr(-1)&&(n+="\n"),o.val(n+"[audio="+t+"] "+e+" [/audio]")},addSongShow:function(t){t?$("body").addClass("commentsAddSongShowed"):$("body").removeClass("commentsAddSongShowed"),comments_.audio.addShow(t)},chat:{styleNode:null,init:function(){$("#comments").attr("chat_show_all_in_common",lib.cookie("comments_chat_show_all_in_common")?"1":"0"),$("#comments_chat_settings_show_all_in_common > input").attr("checked",!!lib.cookie("comments_chat_show_all_in_common")),this.styleNode=$("<style></style>"),$("body").append(this.styleNode)},show:function(t,e){this.hidePostTo(),comments_.chatId=t,comments_.chatName=e,$("#comments_chat_header > span").text("Ð¡Ñ‚ÐµÐ½Ð° "+e),$("#comments").addClass("chat"),$("#comments").attr("chat","1"),$("#comments").scrollTop(0),this.styleNode.html('#comments.chat .commentsComment[chat_id="'+parseInt(t)+'"]{display:block}/*#comments.chat[chat_show_all_in_common="0"] div.commentsComment[chat_id="'+parseInt(t)+'"]{display:block}*/'),lib.paramCookie("comments_chat_help_hide")||$("#comments_chat_help").show()},showPostTo:function(t,e){comments_.chatId||(comments_.chatIdPostTo=t,comments_.chatName=e,$("#comments_chat_post_to > span").text("Ð¾Ñ‚Ð¿Ñ€Ð°Ð²Ð¸Ñ‚ÑŒ Ð½Ð° ÑÑ‚ÐµÐ½Ñƒ "+e),$("#comments").addClass("chat_post_to"))},hidePostTo:function(){comments_.chatIdPostTo=0,$("#comments").removeClass("chat_post_to")},hide:function(){comments_.chatId=0,$("#comments").removeClass("chat"),$("#comments").attr("chat","0"),this.styleNode.html(""),$("#comments_chat_help").hide()},subscribeList:{},subscribe:function(t){0==t||this.subscribeList[t]||($("body").append('<style>#comments[chat="0"][chat_show_all_in_common="0"] .commentsComment[chat_id="'+parseInt(t)+'"]{display:block}</style>'),this.subscribeList[t]=!0)},settings:{showInCommonList:null,hideInCommonList:null,showAllInCommon:function(t){lib.cookie("comments_chat_show_all_in_common",t?"1":""),$("#comments").attr("chat_show_all_in_common",t?"1":"0")}}},hide:function(t){t?$("body").addClass("comments_hided").css("margin-right",-$("body").scrollLeft()+"px"):$("body").removeClass("comments_hided").css("margin-right","0px")}},$(function(){$("#commentsAdd textarea").keydown(function(t){t.ctrlKey&&13==t.keyCode&&comments_.post()}),comments_.chat.init(),user&&user.photo&&$(".commentsAva img").attr("src",user.photo),comments_.get();var t=$("#comments"),e=t.get(0);window.scriptMouseWheelPromise=new Promise(function(t){window.scriptMouseWheelOnLoad=t}),scriptMouseWheelPromise.then(function(){t.bind("mousewheel",function(o,n){(this.scrollTop===e.scrollHeight-t.height()&&n<0||0===this.scrollTop&&n>0)&&o.preventDefault()})}),$(window).scroll(function(t){$("body").hasClass("comments_hided")&&$("#comments_cont").css("margin-right",-$("body").scrollLeft()+"px")})});var styling={setted:!1,cached:!1,style:{background:"rgb(14, 61, 91) url(http://www.planwallpaper.com/static/images/cool-background.jpg)",textColor:"#ddd",linkColor:"aaf",border:"#004"},set:function(){},clear:function(){$("head_background").hide(),this.setted=!1,$("#css_head").html("")}},state={page:!1},save=new function(){var t=!1;this.save=function(e,o){clearTimeout(t),$("#save").show(),$("#save").html("uploading..."),dataExt.set(e,o,function(){$("#save").html("uploaded\x3c!--?--\x3e"),t=setTimeout(function(){$("#save").hide(),$("#save").html("")},4e3)}),help.show(o,e)}},dataExt={cache:{data:{},get:function(t){return this.data[t]||!1},set:function(t,e){this.data={},this.data[t]=e}},get:function(t,e){var o;if(o=this.cache.get(t))e(o);else{if(0==t){var n=!1;return n=JSON.parse($.cookie("data_guest")||'{"objects": {}, "connections": {}}'),n=new Data(t,n),e(n),void dataExt.cache.set(t,n)}$.get("/ajax.php",{type:"cat",cat_id:t},function(o){console.log(o),o=new Data(t,o),dataExt.cache.set(t,o),e(o)},"json")}},set:function(t,e,o){dataExt.cache.set(t,e),0==t?($.cookie("data_guest",JSON.stringify(e.ext),{expires:1e3}),o("OK")):$.post("/ajax.php?type=cat_save",{cat_id:t,data:JSON.stringify(e.ext)},function(t){o("OK"==t?"OK":"ERROR")},"text")}},url={langPrefix:"",set:function(t,e){history.pushState(e,document.title=url.title(t),url.gen(t))},gen:function(t){if("cats"==t.page)var e="/cats";else"cat"==t.page?e="/cat"+t.catId:"catObj"==t.page?e="/cat"+t.catId+"/obj"+t.objId:"about"==t.page?e="/about":"sql"==t.page&&(e="/cat"+t.catId+"/sql");return url.langPrefix+e},title:function(t){return"cats"==t.page?"All Catalogs | Abstract Catalog":"cat"==t.page?"Cat "+ +t.catId+" | Abstract Catalog":"catObj"==t.page?"Cat "+ +t.catId+" - Obj "+ +t.objId+" | Abstract Catalog":"about"==t.page?"Abstract Catalog":"sql"==t.page?"Cat "+ +t.catId+" - SQL | Abstract Catalog":void 0},loadByUrl:function(t){0==t.indexOf("/ru/")&&(url.langPrefix="/ru",t=t.substr(3));var e=t.substr(1).split("/"),o=[];for(var n in e){var i=e[n].match(/([^\d]+)([\d]*)/)||[];o.push([i[1],i[2]])}if(o[0]&&o[0][0]){if("about"==o[0][0]){var a={page:"about"};pages.about.open()}else if("cats"==o[0][0]){a={page:"cats"};pages.cats.open()}else if("cat"==o[0][0]){if(o[1]&&"obj"==o[1][0])a={page:"catObj",catId:+o[0][1],objId:+o[1][1]};else if(o[1]&&"sql"==o[1][0]){a={page:"sql",catId:+o[0][1]};pages.cats.open()}else a={page:"cat",catId:+o[0][1]};if(0==a.catId&&user.id)return void pages.cat.go(user.id);"cat"==a.page?pages.cat.open(a.catId):"catObj"==a.page?pages.catObj.open(a.catId,a.objId):"sql"==a.page&&pages.sql.open(a.catId)}a&&(document.title=this.title(a))}else pages.about.go()}};function fixOnCommentsRight(){}window.onpopstate=function(t){url.loadByUrl(window.location.pathname)},$(function(){$("#initial_loading").hide(),window.scrollBarWidth=$("#comments").width()-$("#commentsComments").width(),fixOnCommentsRight(),menu.init(),buffer.init(),url.loadByUrl(window.location.pathname)});var select={open:function(){$("body").addClass("select"),setTimeout(function(){$("#select").css({display:"inline-block"}).animate({"background-color":"rgba(200, 200, 200, 0.84)"},300,function(){$(this).animate({"background-color":"rgba(220, 220, 220, 0.94)"},300)})})},close:function(){$("body").removeClass("select"),$("#select").hide()}};$(function(){});var help={loginHided:!1,show:function(t,e){if($(".help").hide(),$("#page_catalog").removeClass("_help_hide_table"),e==user.id){var o=lib.objectLength(t.objects);if(0==o)$("#page_catalog").addClass("_help_hide_table"),$("#help_create").css("display","inline-block");else if(1==o)$("#help_create_second").css("display","inline-block");else if(0==lib.objectLength(t.connections))buffer.get()?$("#help_connection2").css("display","inline-block"):$("#help_connection").css("display","inline-block");else if(lib.paramCookie("help_open_object_hide"))0!=e||this.loginHided?help={show:function(){},hide:function(){}}:$("#help_login").css("display","inline-block");else{$("#help_open_object").css("display","inline-block")}}},hide:function(){$(".help").hide()},loginHide:function(){$("#help_login").hide(),this.loginHided=!0}},toast={timeout:!1,show:function(t){$("#toast_text").text(t),$("#toast").css({opacity:1}),setTimeout(function(){$("#toast").hide().fadeIn(300)},0),this.timeout&&(clearTimeout(this.timeout),clearTimeout(this.timeout2)),this.timeout2=setTimeout(function(){},2400),this.timeout=setTimeout(function(){$("#toast").fadeOut()},3700)}};SqlEditor=function(t){var e,o=t.get(0);t.keydown(function(t){9==t.keyCode&&(n("tab"),t.preventDefault(),t.stopPropagation())}),t.keydown(function(t){}),this.getText=function(){var t=o.innerText;return t=(t=(t=(t=t.replace(/â‹‚/g,"^")).replace(/âˆˆ/g," e ")).replace(/â‰¡/g,"==")).replace(/â‹ƒ/g," u ")},this.setText=function(){};var n=function(t){window.getSelection();var n=o.innerText;text1=n,"tab"==t?text1+="\t":"enter"==t&&(text1+="\n"),text1=function(t,e){return dddd=t+"",t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(/==>/g,"âŸ¹")).replace(/=>/g,"âŸ¶")).replace(/(\d+\.{0,1}\d+(?=[^\w\'])|(\||!|\*|\%|\?|\^|â‹‚|\$|âˆˆ|\/|alias|as|==|limit all|only|filter|u|offset|apply|if|limit|union|sort|order by|remove|distinct|connect|connection|having|select|not in|in|where|and|or|with|new|not|this)(?=[^\w])|â‹ƒ|âŸ¶|âŸ¾|âŸ¹|\[|\]|:| - |--[^\s]+|\se\s|\s\!e\s|\.\.|\.|\,|\(|\)|â‰¡|=|âˆ‰|\<|\>)/g,function(t){console.log(t);var e=t.substr(0);return"%"==e?'<span class="_bracket">%\x3c!--âˆ‡--\x3e</span>':e.match(/\s!e\s/)?'<span class="_bracket"> âˆ‰ </span>':"?"==e?'<span class="_bracket">?</span>':"^"==e?'<span class="_bracket">â‹‚</span>':"$"==e?'<span class="_bracket">$</span>':"["==e?'<span class="_brackket" style="color:#888;font-weight:normal;margin-left:2px">[</span>':"]"==e?'<span class="_brlacket" style="color:#888;font-weight:normal;">]</span>':"=="==e?'<span class="_bracket">â‰¡</span>':"*"==e?'<span class="_bracket">*</span>':e.match(/--[^\s]+/)?'<span style="color:#336a33">'+e+"</span>":"u"==e?'<span class="_bracket">â‹ƒ</span>':e.match(/\se\s/)?'<span class="_bracket"> âˆˆ </span>':e.match(/\s\!e\s/)?'<span class="_bracket"> âˆ‰ </span>':e.match(/\s\-\s/)?'<span class="_bracket"> - </span>':-1!=["offset","limit all","only","sort","alias","not in","order by","$","*","%","?","limit","if","filter","apply","select","connect","connection","remove","distinct","union","where","connection","and","in","as","or","new","this","with","not","having"].indexOf(t.substr(0))?'<span class="_bold">'+t.substr(0)+"</span>":"."==t?'<span style="margin-right:1px" class="_bracket _point">.</span>':-1!=["(",")"].indexOf(t[0])?'<span class="_bracket _bracket_ _point">'+t+"</span>":-1!=["!","|","â‹‚","â‹ƒ","â‰¡","âˆˆ","âˆ‰","..","â‹ƒ","[","]","/","=",",",":","{","}","âŸ¶","âŸ¾","âŸ¹"].indexOf(t)?'<span class="_bracket _point">'+t+"</span>":"<"==t[0]?'<span class="_bracket _point">&lt;</span>':">"==t[0]?'<span class="_bracket _point">&gt;</span>':'<span class="_decimal">'+t+"</span>"})).replace(/\{\}/g,'<span style="color:#000080;padding-left:1px;">{}</span>')).replace(/\'.*?\'/g,function(t){return'<span class="_literal">'+t+"</span>"})).replace(/article_params/g,function(t){return'<span  class="_function">'+t+"</span>"})).replace(/rec(?=[\W])/g,function(t){return'<span  class="_function">'+t+"</span>"})).replace(/recursion(?=[\W])/g,function(t){return'<span  class="_function">'+t+"</span>"})).replace(/\n$/g,"")).replace(/(^\n)/g,"<br></div><div>")).replace(/(\n(?=(\n|$)))/g,"</div><div><br>")).replace(/\n/g,"</div><div>")).replace(/\t/g,'<span style="white-space:pre" id="ttt">\t</span>')}(text1),(m=document.getElementById("sql_editor_cursor"+e))&&m.remove(),console.log(ddd=n),e++,o.innerHTML="<div>"+text1+"</div>",console.log("<div>"+text1+"</div>")};this.replace=n},$(function(){$.getScript("/js/jquery.mousewheel.js",scriptMouseWheelOnLoad),$.getScript("https://www.youtube.com/iframe_api"),$.getScript("/js/jquery.color.js"),$(window).resize(t);var t=function(){$(".__window_width").css("width",$(window).width())};t()});